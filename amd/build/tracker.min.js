define ("local_time_tracking/tracker",["jquery","local_time_tracking/timer","local_time_tracking/inactivity_timer","core/ajax","core/log"],function(a,b,c,d,e){var f=function(a,b){this.timer=null;this.inactivityTimer=null;this.sessionId=a;this.settings=b};f.prototype.addElapsedTime=function(a){return d.call([{methodname:"local_time_tracking_add_elapsed_time",args:{sessionid:this.sessionId,elapsedtime:a}}])[0]};f.prototype.start=function(){var d=this;e.debug("TIME_TRACKER: Init");var f=this.settings.interval;console.log("SETTINGS",this.settings);this.timer=new b(1e3);this.timer.start();a(this.timer).on("timer.tick",function(){var a=d.timer.getTicks();e.debug("TRACKER: Tick");if(0==a%f){e.debug("TRACKER: Add elapsed time "+f);d.addElapsedTime(f)}});this.inactivityTimer=new c(1e3*this.settings.idlethreshold,this.settings.sessiontimeout,this.settings.sessiontimeoutwarnthreshold);this.inactivityTimer.init();a(this.inactivityTimer).on("inactive",function(){d.timer.pause()});a(this.inactivityTimer).on("active",function(){d.timer.start()});a(this.inactivityTimer).on("session_timeout",function(){d.inactivityTimer.logout()})};return f});
//# sourceMappingURL=tracker.min.js.map
